<!DOCTYPE html>
<html lang="ja">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Mplusのモンテカルロ法の結果を整形する関数 | Takahiro ONOSHIMA&#39;s website</title>
  <link rel = 'canonical' href = 'https://onoshima.github.io/posts/extract_montecarlo/'>
  <meta name="description" content="  早稲田大学大学院教育学研究科で心理統計や心理測定について研究している小野島昂洋の個人ページです。">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Mplusのモンテカルロ法の結果を整形する関数" />
<meta property="og:description" content="要約 Mplusのモンテカルロ法の書く繰り返しのパラメータや適合度を整形する関数を書きました。Mplusの.outファイルのパスと各パラメータが保存されたテキストファイルのパスを引数に渡して使います。
extract_montecarlo(filename=&#34;mplus.out&#34;, represult = &#34;represults.txt&#34;) 次のように，ヘッダー付きのデータフレームを出力します。
使いたい人がいるかはわかりませんが，一番最後にコードを置いておきます。
問題 Mplusでモンテカルロ法を用いる場合には，MONTECARLOコマンドのオプションでRESULTS = results_monte5.txt;のように書くと各繰り返しのパラメータの推定値や適合度が記録されます。生成されたファイルは次のような見た目をしています。
それぞれの数字が何を表しているかは，.outファイルの最後の方に書いてあります。
RESULTS SAVING INFORMATION Order of data Replication number Parameter estimates (saved in order shown in Technical 1 output) Standard errors (saved in order shown in Technical 1 output) Chi-square : Value Chi-square : Degrees of Freedom Chi-square : P-Value CFI TLI Number of Free Parameters RMSEA : Estimate SRMR Save file results_monte5.txt Save file format Free 要するに，繰り返しの番号ごとにブロックが区切られていて，パラメータの推定値，パラメータの標準誤差，適合度等という順番に並んでいるのですが，パラメータの順番についてはTechnical 1 outputにある順番で並べてあると書いてあります。Technical outputには推定したパラメータに番号がふられています。先ほどの結果のパラメータはこの番号順に並んでいる訳です。普通のMplusの解析だとOUTPUTコマンドにTECH1を指定すると表示されるようですが，MONTECARLOコマンドを使うと自動で表示されるようです。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://onoshima.github.io/posts/extract_montecarlo/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-16T18:38:48+09:00" />
<meta property="article:modified_time" content="2021-01-16T18:38:48+09:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mplusのモンテカルロ法の結果を整形する関数"/>
<meta name="twitter:description" content="要約 Mplusのモンテカルロ法の書く繰り返しのパラメータや適合度を整形する関数を書きました。Mplusの.outファイルのパスと各パラメータが保存されたテキストファイルのパスを引数に渡して使います。
extract_montecarlo(filename=&#34;mplus.out&#34;, represult = &#34;represults.txt&#34;) 次のように，ヘッダー付きのデータフレームを出力します。
使いたい人がいるかはわかりませんが，一番最後にコードを置いておきます。
問題 Mplusでモンテカルロ法を用いる場合には，MONTECARLOコマンドのオプションでRESULTS = results_monte5.txt;のように書くと各繰り返しのパラメータの推定値や適合度が記録されます。生成されたファイルは次のような見た目をしています。
それぞれの数字が何を表しているかは，.outファイルの最後の方に書いてあります。
RESULTS SAVING INFORMATION Order of data Replication number Parameter estimates (saved in order shown in Technical 1 output) Standard errors (saved in order shown in Technical 1 output) Chi-square : Value Chi-square : Degrees of Freedom Chi-square : P-Value CFI TLI Number of Free Parameters RMSEA : Estimate SRMR Save file results_monte5.txt Save file format Free 要するに，繰り返しの番号ごとにブロックが区切られていて，パラメータの推定値，パラメータの標準誤差，適合度等という順番に並んでいるのですが，パラメータの順番についてはTechnical 1 outputにある順番で並べてあると書いてあります。Technical outputには推定したパラメータに番号がふられています。先ほどの結果のパラメータはこの番号順に並んでいる訳です。普通のMplusの解析だとOUTPUTコマンドにTECH1を指定すると表示されるようですが，MONTECARLOコマンドを使うと自動で表示されるようです。"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://onoshima.github.io/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://onoshima.github.io/images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/profile">Profile</a></li>
         
        <li><a href="https://researchmap.jp/onoshima">Works(researchmap)</a></li>
         
        <li><a href="/posts/">Blog</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://onoshima.github.io/posts/mplusautomation/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://onoshima.github.io/posts/blog-renewal/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&text=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&title=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&is_video=false&description=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0&body=Check out this article: https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&title=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&title=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&name=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0&description=%e8%a6%81%e7%b4%84%20Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e6%9b%b8%e3%81%8f%e7%b9%b0%e3%82%8a%e8%bf%94%e3%81%97%e3%81%ae%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%82%84%e9%81%a9%e5%90%88%e5%ba%a6%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0%e3%82%92%e6%9b%b8%e3%81%8d%e3%81%be%e3%81%97%e3%81%9f%e3%80%82Mplus%e3%81%ae.out%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e3%83%91%e3%82%b9%e3%81%a8%e5%90%84%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%8c%e4%bf%9d%e5%ad%98%e3%81%95%e3%82%8c%e3%81%9f%e3%83%86%e3%82%ad%e3%82%b9%e3%83%88%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e3%83%91%e3%82%b9%e3%82%92%e5%bc%95%e6%95%b0%e3%81%ab%e6%b8%a1%e3%81%97%e3%81%a6%e4%bd%bf%e3%81%84%e3%81%be%e3%81%99%e3%80%82%0aextract_montecarlo%28filename%3d%26%2334%3bmplus.out%26%2334%3b%2c%20represult%20%3d%20%26%2334%3brepresults.txt%26%2334%3b%29%20%e6%ac%a1%e3%81%ae%e3%82%88%e3%81%86%e3%81%ab%ef%bc%8c%e3%83%98%e3%83%83%e3%83%80%e3%83%bc%e4%bb%98%e3%81%8d%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%83%95%e3%83%ac%e3%83%bc%e3%83%a0%e3%82%92%e5%87%ba%e5%8a%9b%e3%81%97%e3%81%be%e3%81%99%e3%80%82%0a%e4%bd%bf%e3%81%84%e3%81%9f%e3%81%84%e4%ba%ba%e3%81%8c%e3%81%84%e3%82%8b%e3%81%8b%e3%81%af%e3%82%8f%e3%81%8b%e3%82%8a%e3%81%be%e3%81%9b%e3%82%93%e3%81%8c%ef%bc%8c%e4%b8%80%e7%95%aa%e6%9c%80%e5%be%8c%e3%81%ab%e3%82%b3%e3%83%bc%e3%83%89%e3%82%92%e7%bd%ae%e3%81%84%e3%81%a6%e3%81%8a%e3%81%8d%e3%81%be%e3%81%99%e3%80%82%0a%e5%95%8f%e9%a1%8c%20Mplus%e3%81%a7%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%82%92%e7%94%a8%e3%81%84%e3%82%8b%e5%a0%b4%e5%90%88%e3%81%ab%e3%81%af%ef%bc%8cMONTECARLO%e3%82%b3%e3%83%9e%e3%83%b3%e3%83%89%e3%81%ae%e3%82%aa%e3%83%97%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%a7RESULTS%20%3d%20results_monte5.txt%3b%e3%81%ae%e3%82%88%e3%81%86%e3%81%ab%e6%9b%b8%e3%81%8f%e3%81%a8%e5%90%84%e7%b9%b0%e3%82%8a%e8%bf%94%e3%81%97%e3%81%ae%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ae%e6%8e%a8%e5%ae%9a%e5%80%a4%e3%82%84%e9%81%a9%e5%90%88%e5%ba%a6%e3%81%8c%e8%a8%98%e9%8c%b2%e3%81%95%e3%82%8c%e3%81%be%e3%81%99%e3%80%82%e7%94%9f%e6%88%90%e3%81%95%e3%82%8c%e3%81%9f%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%af%e6%ac%a1%e3%81%ae%e3%82%88%e3%81%86%e3%81%aa%e8%a6%8b%e3%81%9f%e7%9b%ae%e3%82%92%e3%81%97%e3%81%a6%e3%81%84%e3%81%be%e3%81%99%e3%80%82%0a%e3%81%9d%e3%82%8c%e3%81%9e%e3%82%8c%e3%81%ae%e6%95%b0%e5%ad%97%e3%81%8c%e4%bd%95%e3%82%92%e8%a1%a8%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b%e3%81%8b%e3%81%af%ef%bc%8c.out%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e6%9c%80%e5%be%8c%e3%81%ae%e6%96%b9%e3%81%ab%e6%9b%b8%e3%81%84%e3%81%a6%e3%81%82%e3%82%8a%e3%81%be%e3%81%99%e3%80%82%0aRESULTS%20SAVING%20INFORMATION%20Order%20of%20data%20Replication%20number%20Parameter%20estimates%20%28saved%20in%20order%20shown%20in%20Technical%201%20output%29%20Standard%20errors%20%28saved%20in%20order%20shown%20in%20Technical%201%20output%29%20Chi-square%20%3a%20Value%20Chi-square%20%3a%20Degrees%20of%20Freedom%20Chi-square%20%3a%20P-Value%20CFI%20TLI%20Number%20of%20Free%20Parameters%20RMSEA%20%3a%20Estimate%20SRMR%20Save%20file%20results_monte5.txt%20Save%20file%20format%20Free%20%e8%a6%81%e3%81%99%e3%82%8b%e3%81%ab%ef%bc%8c%e7%b9%b0%e3%82%8a%e8%bf%94%e3%81%97%e3%81%ae%e7%95%aa%e5%8f%b7%e3%81%94%e3%81%a8%e3%81%ab%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e3%81%8c%e5%8c%ba%e5%88%87%e3%82%89%e3%82%8c%e3%81%a6%e3%81%84%e3%81%a6%ef%bc%8c%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ae%e6%8e%a8%e5%ae%9a%e5%80%a4%ef%bc%8c%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ae%e6%a8%99%e6%ba%96%e8%aa%a4%e5%b7%ae%ef%bc%8c%e9%81%a9%e5%90%88%e5%ba%a6%e7%ad%89%e3%81%a8%e3%81%84%e3%81%86%e9%a0%86%e7%95%aa%e3%81%ab%e4%b8%a6%e3%82%93%e3%81%a7%e3%81%84%e3%82%8b%e3%81%ae%e3%81%a7%e3%81%99%e3%81%8c%ef%bc%8c%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ae%e9%a0%86%e7%95%aa%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6%e3%81%afTechnical%201%20output%e3%81%ab%e3%81%82%e3%82%8b%e9%a0%86%e7%95%aa%e3%81%a7%e4%b8%a6%e3%81%b9%e3%81%a6%e3%81%82%e3%82%8b%e3%81%a8%e6%9b%b8%e3%81%84%e3%81%a6%e3%81%82%e3%82%8a%e3%81%be%e3%81%99%e3%80%82Technical%20output%e3%81%ab%e3%81%af%e6%8e%a8%e5%ae%9a%e3%81%97%e3%81%9f%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ab%e7%95%aa%e5%8f%b7%e3%81%8c%e3%81%b5%e3%82%89%e3%82%8c%e3%81%a6%e3%81%84%e3%81%be%e3%81%99%e3%80%82%e5%85%88%e3%81%bb%e3%81%a9%e3%81%ae%e7%b5%90%e6%9e%9c%e3%81%ae%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%af%e3%81%93%e3%81%ae%e7%95%aa%e5%8f%b7%e9%a0%86%e3%81%ab%e4%b8%a6%e3%82%93%e3%81%a7%e3%81%84%e3%82%8b%e8%a8%b3%e3%81%a7%e3%81%99%e3%80%82%e6%99%ae%e9%80%9a%e3%81%aeMplus%e3%81%ae%e8%a7%a3%e6%9e%90%e3%81%a0%e3%81%a8OUTPUT%e3%82%b3%e3%83%9e%e3%83%b3%e3%83%89%e3%81%abTECH1%e3%82%92%e6%8c%87%e5%ae%9a%e3%81%99%e3%82%8b%e3%81%a8%e8%a1%a8%e7%a4%ba%e3%81%95%e3%82%8c%e3%82%8b%e3%82%88%e3%81%86%e3%81%a7%e3%81%99%e3%81%8c%ef%bc%8cMONTECARLO%e3%82%b3%e3%83%9e%e3%83%b3%e3%83%89%e3%82%92%e4%bd%bf%e3%81%86%e3%81%a8%e8%87%aa%e5%8b%95%e3%81%a7%e8%a1%a8%e7%a4%ba%e3%81%95%e3%82%8c%e3%82%8b%e3%82%88%e3%81%86%e3%81%a7%e3%81%99%e3%80%82" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&t=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#要約">要約</a></li>
    <li><a href="#問題">問題</a></li>
    <li><a href="#関数">関数</a></li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Mplusのモンテカルロ法の結果を整形する関数
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-01-16 18:38:48 &#43;0900 JST" itemprop="datePublished">2021-01-16</time>
          
        </div>
        
        
        
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/stat">stat</a>
            
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/monte-carlo-simulation" rel="tag">Monte Carlo Simulation</a>
            
             ,  
            <a class="tag-link" href="/tags/mplus" rel="tag">Mplus</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <h2 id="要約">要約</h2>
<p>Mplusのモンテカルロ法の書く繰り返しのパラメータや適合度を整形する関数を書きました。Mplusの.outファイルのパスと各パラメータが保存されたテキストファイルのパスを引数に渡して使います。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">extract_montecarlo</span>(filename<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mplus.out&#34;</span>, represult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;represults.txt&#34;</span>)
</code></pre></div><p>次のように，ヘッダー付きのデータフレームを出力します。</p>
<p><img src="/images/extract_monte_res.png" alt="extract_montecarloの結果"></p>
<p>使いたい人がいるかはわかりませんが，一番最後にコードを置いておきます。</p>
<h2 id="問題">問題</h2>
<p>Mplusでモンテカルロ法を用いる場合には，<code>MONTECARLO</code>コマンドのオプションで<code>RESULTS = results_monte5.txt;</code>のように書くと各繰り返しのパラメータの推定値や適合度が記録されます。生成されたファイルは次のような見た目をしています。</p>
<p><img src="/images/monte_paramres.png" alt="モンテカルロ法の各繰り返しのファイル"></p>
<p>それぞれの数字が何を表しているかは，.outファイルの最後の方に書いてあります。</p>
<pre tabindex="0"><code>RESULTS SAVING INFORMATION

  Order of data

    Replication number
    Parameter estimates
     (saved in order shown in Technical 1 output)
    Standard errors
     (saved in order shown in Technical 1 output)
    Chi-square : Value
    Chi-square : Degrees of Freedom
    Chi-square : P-Value
    CFI
    TLI
    Number of Free Parameters
    RMSEA : Estimate
    SRMR

  Save file
    results_monte5.txt

  Save file format           Free
</code></pre><p>要するに，繰り返しの番号ごとにブロックが区切られていて，パラメータの推定値，パラメータの標準誤差，適合度等という順番に並んでいるのですが，パラメータの順番についてはTechnical 1 outputにある順番で並べてあると書いてあります。Technical outputには推定したパラメータに番号がふられています。先ほどの結果のパラメータはこの番号順に並んでいる訳です。普通のMplusの解析だと<code>OUTPUT</code>コマンドに<code>TECH1</code>を指定すると表示されるようですが，<code>MONTECARLO</code>コマンドを使うと自動で表示されるようです。</p>
<pre tabindex="0"><code>TECHNICAL OUTPUT


     PARAMETER SPECIFICATION


           TAU
              Y1$1          Y1$2          Y2$1          Y3$1          Y3$2
              ________      ________      ________      ________      ________
                  1             2             3             4             5


           TAU
              Y3$3          Y3$4          Y4$1          Y4$2          Y4$3
              ________      ________      ________      ________      ________
                  6             7             8             9            10


           NU
              Y1            Y2            Y3            Y4
              ________      ________      ________      ________
                  0             0             0             0

</code></pre><p><code>MplusAutomation</code>のパッケージに<code>lookupTech1Parameter</code>という関数があり，パラメータ番号を指定するとそれがどのパラメータなのかを教えてくれるのですが，<code>MONTECARLO</code>コマンドで表示されるTECHNICAL OUTPUTはTECH1で表示させたものとは別物として扱われて，うまく扱えませんでした。</p>
<p>この情報をうまくまとまった形で取り出す方法がありそうなものですが，Mplusのユーザーマニュアルをざっとみた感じ見つからなかったので仕方なしに関数を自分で書くことにしました。</p>
<h2 id="関数">関数</h2>
<p><code>reshape_montecarlo_results</code>というデータの形を整える関数と，.outファイルからパラメータと適合度のラベルを取得する<code>obtain_header</code>という2つの関数を組み合わせて<code>extract_mplus_montecarlo</code>という関数を構成しています。とりあえず動けば良いという精神のもと作ったので，さまざまなSEMでちゃんと動くかは試していません。その内試すかもしれません。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(stringr)

reshape_montecarlo_results <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function </span>(filename<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>) {
  x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">scan</span>(filename, what <span style="color:#f92672">=</span> <span style="color:#a6e22e">character</span>())
  rep_index <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">nchar</span>(x)<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">6</span>) <span style="color:#75715e"># replicationは整数値だから文字数は多くとも3-4ぐらいまで</span>
  num_rep <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.integer</span>(x[rep_index]<span style="color:#a6e22e">[length</span>(rep_index)]) <span style="color:#75715e"># 何回整数値が出たかで繰り返し数を判断</span>
  num_val <span style="color:#f92672">&lt;-</span> rep_index[2] <span style="color:#f92672">-</span> rep_index[1] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#75715e"># 整数値の間の要素の数を数えて行列の列にする</span>
  res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(<span style="color:#a6e22e">matrix</span>(<span style="color:#a6e22e">as.numeric</span>(x[<span style="color:#ae81ff">-1</span><span style="color:#f92672">*</span>(rep_index)]), nrow <span style="color:#f92672">=</span> num_rep, ncol <span style="color:#f92672">=</span> num_val, byrow <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>))
  res
}

obtain_header <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(filename <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>) {
  x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">scan</span>(filename, what <span style="color:#f92672">=</span> <span style="color:#a6e22e">character</span>(), sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\n&#34;</span>, blank.lines.skip <span style="color:#f92672">=</span> F)
  parameter_specpart <span style="color:#f92672">&lt;-</span> x<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(x, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PARAMETER SPECIFICATION&#34;</span>))<span style="color:#f92672">:</span>
                            <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(x, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;STARTING VALUES&#34;</span>))]
  
  <span style="color:#75715e">## パラメータのセクションがあるかを確認</span>
  TAUincluded <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">any</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;TAU&#34;</span>))
  LAMBDAincluded <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">any</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;LAMBDA&#34;</span>))
  THETAincluded <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">any</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;THETA&#34;</span>))
  
  divide_into_block <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function </span>(x) {
    dividingline <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(x, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;________&#34;</span>)) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">length</span>(x)) 
    num_block <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">length</span>(dividingline) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> 
    divided <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>()
    <span style="color:#a6e22e">for </span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>num_block) {
      part <span style="color:#f92672">&lt;-</span> x[dividingline[i]<span style="color:#f92672">:</span>(dividingline[i<span style="color:#ae81ff">+1</span>]<span style="color:#ae81ff">-2</span>)]
      divided[[i]] <span style="color:#f92672">&lt;-</span> part
    }
    divided
  }
  get_varnames_over_underscore <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(x) {
    temp <span style="color:#f92672">&lt;-</span> x<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(x, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;________&#34;</span>)) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>]
    varnames <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">unlist</span>(<span style="color:#a6e22e">str_split</span>(temp, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>))<span style="color:#a6e22e">[unlist</span>(<span style="color:#a6e22e">str_split</span>(temp, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>)) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>]
    varnames
  }
  find_parameters <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function </span>(x) {
    temp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(x, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\\s\\d|\\s\\d\\d&#34;</span>)) <span style="color:#75715e"># パラメータ番号が書いてある行を見つける</span>
    temp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">unlist</span>(<span style="color:#a6e22e">str_split</span>(x[temp], pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>)) <span style="color:#75715e"># 空白で分割</span>
    temp[temp <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>]
  }
  split_and_remove_null <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function </span>(x) {
    temp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_split</span>(x, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>)
    temp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lapply</span>(temp, <span style="color:#a6e22e">function </span>(y) {y[y <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>]})
    temp
  }
  fill_zero <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function </span>(x) {
    num_max <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">sapply</span>(x, length))
    <span style="color:#a6e22e">lapply</span>(x, <span style="color:#a6e22e">function </span>(y) {<span style="color:#a6e22e">c</span>(y, <span style="color:#a6e22e">rep</span>(<span style="color:#e6db74">&#34;0&#34;</span>, num_max <span style="color:#f92672">-</span> <span style="color:#a6e22e">length</span>(y)))})
  }
  
  <span style="color:#75715e">## TAUの部分の処理</span>
  tau_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">character</span>()
  <span style="color:#a6e22e">if </span>(TAUincluded) {
    tau <span style="color:#f92672">&lt;-</span> parameter_specpart<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;TAU&#34;</span>))[1]<span style="color:#f92672">:</span><span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;NU&#34;</span>))[1]]
    divided <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">divide_into_block</span>(tau)
    <span style="color:#a6e22e">for </span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(divided)) {
      varnames <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_varnames_over_underscore</span>(divided[[i]])
      parameterno <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">find_parameters</span>(divided[[i]])
      tau_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(tau_res, <span style="color:#a6e22e">str_c</span>(parameterno, <span style="color:#e6db74">&#34;_TAU_&#34;</span>, varnames))
    }
  }
  
  <span style="color:#75715e">## NUの部分の処理</span>
  nu_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">character</span>()
  nu <span style="color:#f92672">&lt;-</span> parameter_specpart<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;NU&#34;</span>))[1]<span style="color:#f92672">:</span>
                             <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;LAMBDA&#34;</span>))[1]]
  divided <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">divide_into_block</span>(nu)
  <span style="color:#a6e22e">for </span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(divided)) {
    varnames <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_varnames_over_underscore</span>(divided[[i]])
    parameterno <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">find_parameters</span>(divided[[i]])
    nu_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(nu_res, <span style="color:#a6e22e">str_c</span>(parameterno, <span style="color:#e6db74">&#34;_NU_&#34;</span>, varnames))
  }
  
  <span style="color:#75715e">## LAMBDAの部分の処理</span>
  lambda_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">character</span>()
  <span style="color:#a6e22e">if </span>(THETAincluded) {
    endpoint <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;THETA&#34;</span>
  } else {
    endpoint <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;ALPHA&#34;</span>
  }
  lambda <span style="color:#f92672">&lt;-</span> parameter_specpart<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;LAMBDA&#34;</span>))[1]<span style="color:#f92672">:</span>
                                 <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> endpoint))[1]] <span style="color:#75715e">#全部カテゴリカルだとTHETAなしの場合があるためALPHA</span>
  divided <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">divide_into_block</span>(lambda)
  <span style="color:#a6e22e">for </span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(divided)) {
    names_lv <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_varnames_over_underscore</span>(divided[[i]])
    lines_including_param <span style="color:#f92672">&lt;-</span> divided[[i]]<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(divided[[i]], pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\\s\\d|\\s\\d\\d&#34;</span>))]
    parameterno <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">split_and_remove_null</span>(lines_including_param)
    lambda_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(lambda_res, <span style="color:#a6e22e">unlist</span>(<span style="color:#a6e22e">lapply</span>(parameterno, <span style="color:#a6e22e">function </span>(x) {
      names_ov <span style="color:#f92672">&lt;-</span> x[1]
      <span style="color:#a6e22e">str_c</span>(x[2<span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(x)], names_lv, <span style="color:#e6db74">&#34;_BY_&#34;</span>, names_ov)
    })))
  }
  
  <span style="color:#75715e">## THETAの部分</span>
  theta_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">character</span>()
  <span style="color:#a6e22e">if </span>(THETAincluded) {
    theta <span style="color:#f92672">&lt;-</span> parameter_specpart<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;THETA&#34;</span>))[1]<span style="color:#f92672">:</span>
                                  <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ALPHA&#34;</span>))[1]]
    
    divided <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">divide_into_block</span>(theta)
    <span style="color:#a6e22e">for </span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(divided)) {
      varnames_col <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_varnames_over_underscore</span>(divided[[i]])
      lines_including_param <span style="color:#f92672">&lt;-</span> divided[[i]]<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(divided[[i]], pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\\s\\d|\\s\\d\\d&#34;</span>))]
      parameterno <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">split_and_remove_null</span>(lines_including_param)
      parameterno <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">fill_zero</span>(parameterno)
      theta_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(theta_res, <span style="color:#a6e22e">unlist</span>(<span style="color:#a6e22e">lapply</span>(parameterno, <span style="color:#a6e22e">function </span>(x) {
        varnames_row <span style="color:#f92672">&lt;-</span> x[1]
        <span style="color:#a6e22e">str_c</span>(x[2<span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(x)], varnames_row, <span style="color:#e6db74">&#34;_WITH_&#34;</span>, varnames_col)
      })))
    }
  }
  
  <span style="color:#75715e">## ALPHAの部分の処理</span>
  alpha <span style="color:#f92672">&lt;-</span> parameter_specpart<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ALPHA&#34;</span>))[1]<span style="color:#f92672">:</span>
                                <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;BETA&#34;</span>))[1]]
  alpha_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">character</span>()
  divided <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">divide_into_block</span>(alpha)
  <span style="color:#a6e22e">for </span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(divided)) {
    varnames <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_varnames_over_underscore</span>(divided[[i]])
    parameterno <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">find_parameters</span>(divided[[i]])
    alpha_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(alpha_res, <span style="color:#a6e22e">str_c</span>(parameterno, <span style="color:#e6db74">&#34;ALPHA_&#34;</span>, varnames))
  }
  
  <span style="color:#75715e">## BETAの部分の処理</span>
  beta <span style="color:#f92672">&lt;-</span> parameter_specpart<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;BETA&#34;</span>))[1]<span style="color:#f92672">:</span>
                               <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PSI&#34;</span>))[1]]
  beta_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">character</span>()
  divided <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">divide_into_block</span>(beta)
  <span style="color:#a6e22e">for </span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(divided)) {
    names_iv <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_varnames_over_underscore</span>(divided[[i]])
    lines_including_param <span style="color:#f92672">&lt;-</span> divided[[i]]<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(divided[[i]], pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\\s\\d|\\s\\d\\d&#34;</span>))]
    parameterno <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">split_and_remove_null</span>(lines_including_param)
    beta_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(beta_res, <span style="color:#a6e22e">unlist</span>(<span style="color:#a6e22e">lapply</span>(parameterno, <span style="color:#a6e22e">function </span>(x) {
      names_dv <span style="color:#f92672">&lt;-</span> x[1]
      <span style="color:#a6e22e">str_c</span>(x[2<span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(x)], names_dv, <span style="color:#e6db74">&#34;_ON_&#34;</span>, names_iv)
    })))
  }
  
  <span style="color:#75715e">## PSIの部分の処理</span>
  psi <span style="color:#f92672">&lt;-</span> parameter_specpart<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PSI&#34;</span>))[1]<span style="color:#f92672">:</span>
                              <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(parameter_specpart, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;STARTING VALUES&#34;</span>))[1]]
  psi_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">character</span>()
  divided <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">divide_into_block</span>(psi)
  
  <span style="color:#a6e22e">for </span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(divided)) {
    varnames_col <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_varnames_over_underscore</span>(divided[[i]])
    lines_including_param <span style="color:#f92672">&lt;-</span> divided[[i]]<span style="color:#a6e22e">[which</span>(<span style="color:#a6e22e">str_detect</span>(divided[[i]], pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\\s\\d|\\s\\d\\d&#34;</span>))]
    parameterno <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">split_and_remove_null</span>(lines_including_param)
    parameterno <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">fill_zero</span>(parameterno)
    psi_res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(psi_res, <span style="color:#a6e22e">unlist</span>(<span style="color:#a6e22e">lapply</span>(parameterno, <span style="color:#a6e22e">function </span>(x) {
      varnames_row <span style="color:#f92672">&lt;-</span> x[1]
      <span style="color:#a6e22e">str_c</span>(x[2<span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(x)], varnames_row, <span style="color:#e6db74">&#34;_WITH_&#34;</span>, varnames_col)
    })))
  }
  
  <span style="color:#75715e">## 適合度などの名前を取得</span>
  start_index <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(x, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Replication number&#34;</span>)) <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span>
  temp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">str_detect</span>(x, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Save file&#34;</span>))
  end_index <span style="color:#f92672">&lt;-</span> temp[temp <span style="color:#f92672">&gt;</span> start_index][1] <span style="color:#f92672">-</span> <span style="color:#ae81ff">2</span>
  fit_names <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_trim</span>(x[start_index<span style="color:#f92672">:</span>end_index])
  
  labels_param <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(tau_res, nu_res, lambda_res, theta_res, alpha_res, beta_res, psi_res)
  labels_param <span style="color:#f92672">&lt;-</span> labels_param<span style="color:#a6e22e">[str_detect</span>(labels_param, pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;^[^0]&#34;</span>)]
  labels_param_est <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_c</span>(labels_param, <span style="color:#e6db74">&#34;_est&#34;</span>)
  labels_param_se <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_c</span>(labels_param, <span style="color:#e6db74">&#34;_se&#34;</span>)
  <span style="color:#a6e22e">c</span>(labels_param_est, labels_param_se, fit_names)
}

extract_mplus_montecarlo <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function </span>(outfile <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>, represult <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>) {
  dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">reshape_montecarlo_results</span>(represult)
  <span style="color:#a6e22e">colnames</span>(dat) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">obtain_header</span>(outfile)
  dat
}
</code></pre></div>
    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/profile">Profile</a></li>
         
          <li><a href="https://researchmap.jp/onoshima">Works(researchmap)</a></li>
         
          <li><a href="/posts/">Blog</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#要約">要約</a></li>
    <li><a href="#問題">問題</a></li>
    <li><a href="#関数">関数</a></li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&text=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&title=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&is_video=false&description=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0&body=Check out this article: https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&title=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&title=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&name=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0&description=%e8%a6%81%e7%b4%84%20Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e6%9b%b8%e3%81%8f%e7%b9%b0%e3%82%8a%e8%bf%94%e3%81%97%e3%81%ae%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%82%84%e9%81%a9%e5%90%88%e5%ba%a6%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0%e3%82%92%e6%9b%b8%e3%81%8d%e3%81%be%e3%81%97%e3%81%9f%e3%80%82Mplus%e3%81%ae.out%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e3%83%91%e3%82%b9%e3%81%a8%e5%90%84%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%8c%e4%bf%9d%e5%ad%98%e3%81%95%e3%82%8c%e3%81%9f%e3%83%86%e3%82%ad%e3%82%b9%e3%83%88%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e3%83%91%e3%82%b9%e3%82%92%e5%bc%95%e6%95%b0%e3%81%ab%e6%b8%a1%e3%81%97%e3%81%a6%e4%bd%bf%e3%81%84%e3%81%be%e3%81%99%e3%80%82%0aextract_montecarlo%28filename%3d%26%2334%3bmplus.out%26%2334%3b%2c%20represult%20%3d%20%26%2334%3brepresults.txt%26%2334%3b%29%20%e6%ac%a1%e3%81%ae%e3%82%88%e3%81%86%e3%81%ab%ef%bc%8c%e3%83%98%e3%83%83%e3%83%80%e3%83%bc%e4%bb%98%e3%81%8d%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%83%95%e3%83%ac%e3%83%bc%e3%83%a0%e3%82%92%e5%87%ba%e5%8a%9b%e3%81%97%e3%81%be%e3%81%99%e3%80%82%0a%e4%bd%bf%e3%81%84%e3%81%9f%e3%81%84%e4%ba%ba%e3%81%8c%e3%81%84%e3%82%8b%e3%81%8b%e3%81%af%e3%82%8f%e3%81%8b%e3%82%8a%e3%81%be%e3%81%9b%e3%82%93%e3%81%8c%ef%bc%8c%e4%b8%80%e7%95%aa%e6%9c%80%e5%be%8c%e3%81%ab%e3%82%b3%e3%83%bc%e3%83%89%e3%82%92%e7%bd%ae%e3%81%84%e3%81%a6%e3%81%8a%e3%81%8d%e3%81%be%e3%81%99%e3%80%82%0a%e5%95%8f%e9%a1%8c%20Mplus%e3%81%a7%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%82%92%e7%94%a8%e3%81%84%e3%82%8b%e5%a0%b4%e5%90%88%e3%81%ab%e3%81%af%ef%bc%8cMONTECARLO%e3%82%b3%e3%83%9e%e3%83%b3%e3%83%89%e3%81%ae%e3%82%aa%e3%83%97%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%a7RESULTS%20%3d%20results_monte5.txt%3b%e3%81%ae%e3%82%88%e3%81%86%e3%81%ab%e6%9b%b8%e3%81%8f%e3%81%a8%e5%90%84%e7%b9%b0%e3%82%8a%e8%bf%94%e3%81%97%e3%81%ae%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ae%e6%8e%a8%e5%ae%9a%e5%80%a4%e3%82%84%e9%81%a9%e5%90%88%e5%ba%a6%e3%81%8c%e8%a8%98%e9%8c%b2%e3%81%95%e3%82%8c%e3%81%be%e3%81%99%e3%80%82%e7%94%9f%e6%88%90%e3%81%95%e3%82%8c%e3%81%9f%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%af%e6%ac%a1%e3%81%ae%e3%82%88%e3%81%86%e3%81%aa%e8%a6%8b%e3%81%9f%e7%9b%ae%e3%82%92%e3%81%97%e3%81%a6%e3%81%84%e3%81%be%e3%81%99%e3%80%82%0a%e3%81%9d%e3%82%8c%e3%81%9e%e3%82%8c%e3%81%ae%e6%95%b0%e5%ad%97%e3%81%8c%e4%bd%95%e3%82%92%e8%a1%a8%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b%e3%81%8b%e3%81%af%ef%bc%8c.out%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e6%9c%80%e5%be%8c%e3%81%ae%e6%96%b9%e3%81%ab%e6%9b%b8%e3%81%84%e3%81%a6%e3%81%82%e3%82%8a%e3%81%be%e3%81%99%e3%80%82%0aRESULTS%20SAVING%20INFORMATION%20Order%20of%20data%20Replication%20number%20Parameter%20estimates%20%28saved%20in%20order%20shown%20in%20Technical%201%20output%29%20Standard%20errors%20%28saved%20in%20order%20shown%20in%20Technical%201%20output%29%20Chi-square%20%3a%20Value%20Chi-square%20%3a%20Degrees%20of%20Freedom%20Chi-square%20%3a%20P-Value%20CFI%20TLI%20Number%20of%20Free%20Parameters%20RMSEA%20%3a%20Estimate%20SRMR%20Save%20file%20results_monte5.txt%20Save%20file%20format%20Free%20%e8%a6%81%e3%81%99%e3%82%8b%e3%81%ab%ef%bc%8c%e7%b9%b0%e3%82%8a%e8%bf%94%e3%81%97%e3%81%ae%e7%95%aa%e5%8f%b7%e3%81%94%e3%81%a8%e3%81%ab%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e3%81%8c%e5%8c%ba%e5%88%87%e3%82%89%e3%82%8c%e3%81%a6%e3%81%84%e3%81%a6%ef%bc%8c%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ae%e6%8e%a8%e5%ae%9a%e5%80%a4%ef%bc%8c%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ae%e6%a8%99%e6%ba%96%e8%aa%a4%e5%b7%ae%ef%bc%8c%e9%81%a9%e5%90%88%e5%ba%a6%e7%ad%89%e3%81%a8%e3%81%84%e3%81%86%e9%a0%86%e7%95%aa%e3%81%ab%e4%b8%a6%e3%82%93%e3%81%a7%e3%81%84%e3%82%8b%e3%81%ae%e3%81%a7%e3%81%99%e3%81%8c%ef%bc%8c%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ae%e9%a0%86%e7%95%aa%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6%e3%81%afTechnical%201%20output%e3%81%ab%e3%81%82%e3%82%8b%e9%a0%86%e7%95%aa%e3%81%a7%e4%b8%a6%e3%81%b9%e3%81%a6%e3%81%82%e3%82%8b%e3%81%a8%e6%9b%b8%e3%81%84%e3%81%a6%e3%81%82%e3%82%8a%e3%81%be%e3%81%99%e3%80%82Technical%20output%e3%81%ab%e3%81%af%e6%8e%a8%e5%ae%9a%e3%81%97%e3%81%9f%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%ab%e7%95%aa%e5%8f%b7%e3%81%8c%e3%81%b5%e3%82%89%e3%82%8c%e3%81%a6%e3%81%84%e3%81%be%e3%81%99%e3%80%82%e5%85%88%e3%81%bb%e3%81%a9%e3%81%ae%e7%b5%90%e6%9e%9c%e3%81%ae%e3%83%91%e3%83%a9%e3%83%a1%e3%83%bc%e3%82%bf%e3%81%af%e3%81%93%e3%81%ae%e7%95%aa%e5%8f%b7%e9%a0%86%e3%81%ab%e4%b8%a6%e3%82%93%e3%81%a7%e3%81%84%e3%82%8b%e8%a8%b3%e3%81%a7%e3%81%99%e3%80%82%e6%99%ae%e9%80%9a%e3%81%aeMplus%e3%81%ae%e8%a7%a3%e6%9e%90%e3%81%a0%e3%81%a8OUTPUT%e3%82%b3%e3%83%9e%e3%83%b3%e3%83%89%e3%81%abTECH1%e3%82%92%e6%8c%87%e5%ae%9a%e3%81%99%e3%82%8b%e3%81%a8%e8%a1%a8%e7%a4%ba%e3%81%95%e3%82%8c%e3%82%8b%e3%82%88%e3%81%86%e3%81%a7%e3%81%99%e3%81%8c%ef%bc%8cMONTECARLO%e3%82%b3%e3%83%9e%e3%83%b3%e3%83%89%e3%82%92%e4%bd%bf%e3%81%86%e3%81%a8%e8%87%aa%e5%8b%95%e3%81%a7%e8%a1%a8%e7%a4%ba%e3%81%95%e3%82%8c%e3%82%8b%e3%82%88%e3%81%86%e3%81%a7%e3%81%99%e3%80%82" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fonoshima.github.io%2fposts%2fextract_montecarlo%2f&t=Mplus%e3%81%ae%e3%83%a2%e3%83%b3%e3%83%86%e3%82%ab%e3%83%ab%e3%83%ad%e6%b3%95%e3%81%ae%e7%b5%90%e6%9e%9c%e3%82%92%e6%95%b4%e5%bd%a2%e3%81%99%e3%82%8b%e9%96%a2%e6%95%b0" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2022  Takahiro ONOSHIMA 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/profile">Profile</a></li>
         
        <li><a href="https://researchmap.jp/onoshima">Works(researchmap)</a></li>
         
        <li><a href="/posts/">Blog</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>



  


<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

</html>
